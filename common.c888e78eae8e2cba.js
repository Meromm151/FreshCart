"use strict";(self.webpackChunkfreshCart=self.webpackChunkfreshCart||[]).push([[592],{1704:(l,p,i)=>{i.d(p,{Y:()=>L});var u=i(4670),t=i(4946),a=i(6814),c=i(1409),_=i(4931),n=i(8806),h=i(2425),C=i(4940),m=i(6286);const f=["container"];function y(d,g){1&d&&(t.TgZ(0,"span"),t._uU(1,"..."),t.qZA())}function v(d,g){if(1&d&&(t.TgZ(0,"li"),t._UZ(1,"i",19),t.qZA()),2&d){const r=g.$implicit;t.xp6(1),t.Q6J("ngClass",1==r?"rating-color":"")}}const P=function(d){return{background:d}},O=function(d){return["/product",d]};let L=(()=>{class d{constructor(r,e,s,o){this.wishList=r,this.toastr=e,this._AuthCheckerService=s,this._CartService=o,this.Subscription=[],this.display=!1,this.stars=[1,2,3,4,5]}rating(){let r=0,e=!1,s=this.stars.map(o=>Math.floor(this.product.ratingsAverage)>r?(r++,o=1):e?o=0:(e=!e,o=this.product.ratingsAverage-Math.floor(this.product.ratingsAverage),o=parseFloat(o.toFixed(2))));this.stars=s}ngOnChanges(){this.rating()}quickView(){this.display=!this.display,1==this.display&&(this.generatedynamicLoader("ProductDetailsComponent"),this.display=!this.display)}addToWishList(){if(this._AuthCheckerService.isLogged()){if(1!=this.product.wished){const r=this.wishList.addToWishList(this.product._id).subscribe({next:e=>{this.toastr.success(e.message),this.wishList.wishListItemsnumber.next(e.data.length),this.wishList.newWishListItemAdded.next(1)},error:e=>{}});this.Subscription.push(r)}else{const r=this.wishList.deleteFromWishList(this.product._id).subscribe({next:e=>{this.toastr.success(e.message),this.wishList.wishListItemsnumber.next(e.data.length)},error:e=>{}});this.Subscription.push(r)}this.product.wished=!this.product.wished}else this.display=!this.display,1==this.display&&(this.generatedynamicLoader("RegisterComponent"),this.display=!this.display)}generatedynamicLoader(r){this.container.clear();const e=this.container.createComponent(_.Z);e.instance.dynamicProduct=this.product,e.instance.showPopUp=this.display,e.instance.componentType=r;const s=e.instance.clearViewContainer.subscribe(o=>this.clear());this.Subscription.push(s)}clear(){this.container.clear()}addToCart(){if(this._AuthCheckerService.isLogged()){const r=this._CartService.addProductToCart(this.product._id).subscribe({next:e=>{this._CartService.cartItemsnumber.next(e.numOfCartItems),this.toastr.success(e.message),this._CartService.newCartItemAdded.next(1)},error:e=>{}});this.Subscription.push(r)}else this.display=!this.display,1==this.display&&(this.generatedynamicLoader("RegisterComponent"),this.display=!this.display)}ngOnDestroy(){this.Subscription.forEach(r=>r.unsubscribe())}static#t=this.\u0275fac=function(e){return new(e||d)(t.Y36(n.i),t.Y36(h._W),t.Y36(C.T),t.Y36(m.N))};static#e=this.\u0275cmp=t.Xpm({type:d,selectors:[["app-product-card"]],viewQuery:function(e,s){if(1&e&&t.Gf(f,5,t.s_b),2&e){let o;t.iGM(o=t.CRH())&&(s.container=o.first)}},inputs:{product:"product"},standalone:!0,features:[t.TTD,t.jDz],decls:29,vars:18,consts:[[1,"product","position-relative",3,"id"],[1,"img-container","mw-100","mb-2",3,"ngStyle"],[1,"p-3"],[1,"text-secondary","category-name"],[1,"mt-2","product-title",3,"routerLink"],[4,"ngIf"],[1,"rating","d-flex"],[1,"d-flex"],[1,"list-unstyled","p-0","d-flex","pe-1"],[4,"ngFor","ngForOf"],[1,"ps-1"],[1,"d-flex","justify-content-between","align-items-center"],[1,"btn-main",3,"click"],[1,"overlay","position-absolute","w-100","d-flex","align-items-center","justify-content-center","top-0","start-0","opacity-0"],[1,"quick-view","btn-light","p-2","px-3",3,"click"],[1,"fa-regular","fa-eye"],[1,"wish-list","btn-light","p-2","px-3","ms-2",3,"click"],[1,"fa-heart",3,"ngClass"],["container",""],[1,"fa-solid","fa-star",3,"ngClass"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"div",1),t.TgZ(2,"div",2)(3,"span",3),t._uU(4),t.qZA(),t.TgZ(5,"h5",4),t._uU(6),t.ALo(7,"cutText"),t.YNc(8,y,2,0,"span",5),t.qZA(),t.TgZ(9,"div",6)(10,"div",7)(11,"ul",8),t.YNc(12,v,2,1,"li",9),t.qZA(),t.TgZ(13,"span"),t._uU(14),t.qZA()(),t.TgZ(15,"span",10),t._uU(16),t.qZA()(),t.TgZ(17,"div",11)(18,"span"),t._uU(19),t.qZA(),t.TgZ(20,"button",12),t.NdJ("click",function(){return s.addToCart()}),t._uU(21,"+ Add"),t.qZA()(),t.TgZ(22,"div",13)(23,"button",14),t.NdJ("click",function(){return s.quickView()}),t._UZ(24,"i",15),t.qZA(),t.TgZ(25,"button",16),t.NdJ("click",function(){return s.addToWishList()}),t._UZ(26,"i",17),t.qZA()()()(),t.GkF(27,null,18)),2&e&&(t.Q6J("id",s.product._id),t.xp6(1),t.Q6J("ngStyle",t.VKq(14,P,"url("+s.product.imageCover+") no-repeat center center / cover")),t.xp6(3),t.Oqu(s.product.category.name),t.xp6(1),t.Q6J("routerLink",t.VKq(16,O,s.product._id)),t.xp6(1),t.hij("",t.xi3(7,11,s.product.title,20)," "),t.xp6(2),t.Q6J("ngIf",s.product.title.length>20),t.xp6(4),t.Q6J("ngForOf",s.stars),t.xp6(2),t.Oqu(s.product.ratingsAverage),t.xp6(2),t.hij("(",s.product.ratingsQuantity,")"),t.xp6(3),t.hij("",s.product.price,".00 LE"),t.xp6(7),t.Q6J("ngClass",s.product.wished?"fa-solid":"fa-regular"))},dependencies:[a.ez,a.mk,a.sg,a.O5,a.PC,c.Q,u.rH],styles:[".img-container[_ngcontent-%COMP%]{height:250px}.overlay[_ngcontent-%COMP%]{height:250px;background-color:#d3d3d342;transition:.5s}.product[_ngcontent-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{opacity:1!important}.overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{box-shadow:2px 4px 14px -4px #0000007a}.product-quick-view[_ngcontent-%COMP%]{background-color:#00000062;z-index:5}.category-name[_ngcontent-%COMP%]{font-size:14px}.product-quick-view[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:0;opacity:0;z-index:-10;transition:.5s}.my-show[_ngcontent-%COMP%]{z-index:10;height:100vh;opacity:1}.w-60[_ngcontent-%COMP%]{width:60%}"]})}return d})()},1409:(l,p,i)=>{i.d(p,{Q:()=>t});var u=i(4946);let t=(()=>{class a{transform(_,n){return _.split("").slice(0,n).join("")}static#t=this.\u0275fac=function(n){return new(n||a)};static#e=this.\u0275pipe=u.Yjl({name:"cutText",type:a,pure:!0,standalone:!0})}return a})()},5884:(l,p,i)=>{i.d(p,{G:()=>a});var u=i(4946),t=i(9862);let a=(()=>{class c{constructor(n){this._HttpClient=n,this.baseURL="https://ecommerce.routemisr.com/api/v1/"}getAllCategories(){return this._HttpClient.get(this.baseURL+"categories")}static#t=this.\u0275fac=function(h){return new(h||c)(u.LFG(t.eN))};static#e=this.\u0275prov=u.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},1508:(l,p,i)=>{i.d(p,{N:()=>a});var u=i(9862),t=i(4946);let a=(()=>{class c{constructor(n){this._httpClient=n,this.baseURL="https://ecommerce.routemisr.com/api/v1/orders/",this.headers=new u.WM({token:localStorage.getItem("token")})}createCashOrder(n,h){return this._httpClient.post(this.baseURL+n,h,{headers:this.headers})}createCreditOrder(n,h){return this._httpClient.post(this.baseURL+"checkout-session/"+n+"?url=https://new-freshcart.netlify.app/",h,{headers:this.headers})}getUserOrders(n){return this._httpClient.get(this.baseURL+"user/"+n,{headers:this.headers})}static#t=this.\u0275fac=function(h){return new(h||c)(t.LFG(u.eN))};static#e=this.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()}}]);